# Maintainer: Ellery Familia <ellery@elleryfamilia.com>
pkgname=brosh-bin
pkgver=0.1.0
pkgrel=1
pkgdesc="AI-native terminal built for Claude coders"
arch=('x86_64' 'aarch64')
url="https://github.com/elleryfamilia/brosh"
license=('MIT')
depends=('gtk3' 'nss' 'libxss' 'alsa-lib')
provides=('brosh')
conflicts=('brosh')
source_x86_64=("${url}/releases/download/v${pkgver}/brosh_${pkgver}_amd64.deb")
source_aarch64=("${url}/releases/download/v${pkgver}/brosh_${pkgver}_arm64.deb")
sha256sums_x86_64=('SKIP')
sha256sums_aarch64=('SKIP')

package() {
    bsdtar -xf data.tar.* -C "$pkgdir/"

    # Fix permissions
    find "$pkgdir" -type d -exec chmod 755 {} +

    # Install license
    install -Dm644 "$pkgdir/usr/share/doc/brosh/copyright" \
        "$pkgdir/usr/share/licenses/$pkgname/LICENSE" 2>/dev/null || true
}
